<!DOCTYPE html>
<html>
<head>
    <title>アンケートフォーム</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script> <!-- LIFF SDKの追加 -->
    <style>
        /* 既存のスタイルはそのまま */
        body { background-color: #ffffe0; }
        .form-section { margin-bottom: 20px; }
        label, input, select, textarea {
            display: block;
            margin-bottom: 10px;
        }
        textarea { width: 100%; height: 100px; }
        input[type="submit"] { margin-top: 20px; }
    </style>
</head>
<body>
    <form id="survey-form" enctype="multipart/form-data">
        <!-- フォーム内容は変更なし -->
        <div class="form-section">
            <h2>投稿内容１</h2>
            <label for="category1">カテゴリー:</label>
            <select name="category" id="category1">
                <option value="公共・インフラ">公共・インフラ</option>
                <option value="子育て">子育て</option>
                <option value="街づくり">街づくり</option>
                <option value="防犯">防犯</option>
                <option value="その他">その他</option>
            </select>
            <label for="comment1">ご相談内容をご記入ください。:</label>
            <textarea name="comment" id="comment1"></textarea>
            <label for="file">ファイルアップロード:</label>
            <input type="file" name="myFile" id="file" accept="image/*">
        </div>
        <input type="submit" value="送信">
    </form>

    <script>
      window.onload = function() {
        liff.init({ liffId: "2002419122-9vb67yoY" }) // LIFF IDを設定
          .then(() => {
            if (!liff.isLoggedIn()) {
              liff.login(); // LIFFが未ログインの場合はログイン処理を行う
            }
          })
          .catch((err) => {
            console.log(err.code, err.message);
          });

        document.getElementById('survey-form').addEventListener('submit', (e) => {
          e.preventDefault(); // フォームの標準送信を防止
          handleFormSubmit();
        });
      };

      function handleFormSubmit() {
        // ここにフォーム送信処理を書く
      }
    </script>
</body>
</html>
